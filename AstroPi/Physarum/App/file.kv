<FileChoosePopup>:
    title: "Choose a folder"
    size_hint: .9, .9
    auto_dismiss: False

    BoxLayout:
        orientation: "vertical"
        FileChooser:
            id: filechooser
            dirselect: True
            path:
                filechooser.path
            FileChooserIconLayout

        BoxLayout:
            size_hint: (1, 0.1)
            pos_hint: {'center_x': .5, 'center_y': .5}
            spacing: 20
            Button:
                text: "Cancel"
                on_release: root.dismiss()
            Button:
                text: "Load"
                on_release: root.load(filechooser.selection)
                id: ldbtn
                disabled: True if filechooser.selection==[] else False

<Tab>:
    do_default_tab: False

    TabbedPanelItem:
        text: 'Basic'
        background_color: (1, .5, 0, 1)
        background_normal: ''
        GridLayout:
            cols: 2
            row_force_default: True
            row_default_height: 30
            
            Label:
                text: 'Sequence name'
            TextInput:
                id: series_name
                multiline: False
           
            Label:
                text: 'Number of moving cells'
            TextInput:
                id: NUM_CELLS
                multiline: False
            
            Label:
                text: 'Number of generated frames'
            TextInput:
                id: FRAMES_COUNT
                multiline: False

            Label:
                text: 'Photo width[px] - must be same for all photos'
            TextInput:
                id: SIM_WIDTH
                multiline: False

            Label:
                text: 'Photo height[px] - must be same for all photos'
            TextInput:
                id: SIM_HEIGHT
                multiline: False
            
            
            Button:
                text: 'submit'
                on_press: app.submit()
            Button:
                text: 'Reset'
                on_press: app.reset()

    TabbedPanelItem:
        text: 'Advanced'
        background_color: (1, .5, 0, 1)
        background_normal: ''
        GridLayout:
            cols: 2
            row_force_default: True
            row_default_height: 30
            
            Label:
                text: 'Photo imporatnce (0 - 0.1)'
            TextInput:
                id: PHOTO_WEIGHT
                multiline: False
            
            Label:
                text: 'How many frames does the photo last'
            TextInput:
                id: PHOTO_DURATION
                multiline: False
            
            Label:
                text: 'Do you want to use initial photo (True/False)'
            TextInput:
                id: BASED_ON_PHOTOS
                multiline: False
            
            Label:
                text: 'How fast do cells move [px/s]'
            TextInput:
                id: SPEED
                multiline: False
            
            Label:
                text: 'How far do the cells "see"? [px]'
            TextInput:
                id: SENSOR_DISTANCE
                multiline: False
            
            Label:
                text: 'How "wide" do the cells see? [deg]'
            TextInput:
                id: SENSOR_ANGLE
                multiline: False
            
            Label:
                text: 'How much do the cells rotate? [deg]'
            TextInput:
                id: ROTATE_ANGLE
                multiline: False
            
            Label:
                text: 'Importance of other cells (0 - 1)'
            TextInput:
                id: VSIM_CELL_WEIGHT
                multiline: False
            
            Label:
                text: 'How many frames do the cells last'
            TextInput:
                id: VSIM_LIFETIME
                multiline: False

            Button:
                text: 'Submit'
                on_press: app.submit()
            Button:
                text: 'Reset'
                on_press: app.reset()
    TabbedPanelItem:
        text: 'Choose folder'
        background_color: (1, .5, 0, 1)
        background_normal: ''
        StackLayout:
            orientation: 'lr-tb'
            size_hint_y: None
            height: 30
            spacing: 5
            Label:
                text: ''
                size_hint_x: 1
            Label:
                text: ''
                size_hint_x: 0.2
            Button:
                text: 'Folder with images'
                size_hint_x: 0.2
                on_press: root.open_popup_source()
            TextInput:
                id: DATA_FOLDER
                readonly: True
                size_hint_x: 0.4
            Label:
                text: ''
                size_hint_x: 0.2

            Label:
                text: ''
                size_hint_x: 1
            Label:
                text: ''
                size_hint_x: 0.2
            Button:
                text: 'Sequence export folder'
                size_hint_x: 0.2
                on_press: root.open_popup_export()
            TextInput:
                id: SAVE_DATA_FOLDER
                readonly: True
                size_hint_x: 0.4
            Label:
                text: ''
                size_hint_x: 0.2

            Button:
                text: 'Submit'
                on_press: app.submit()
            Button:
                text: 'Reset'
                on_press: app.reset()
    TabbedPanelItem:
        text: 'Generate'
        background_color: (1, .5, 0, 1)
        background_normal: ''
        GridLayout:
            cols: 1
            row_force_default: True
            row_default_height: 30
            Label:
                text: 'Values'
            
            Label:
                text: 'Necessary'
            Label:
                id: series_name_label
                text: 'Sequence name: NOT SET'
            Label:
                id: DATA_FOLDER_label
                text: 'Folder with images: NOT SET'
            Label:
                id: NUM_CELLS_label
                text: 'Number of moving cells: NOT SET'
            Label:
                id: FRAMES_COUNT_label
                text: 'Number of generated frames: NOT SET'
            Label:
                id: SIM_HEIGHT_label
                text: 'Photo height: NOT SET'
            Label:
                id: SIM_WIDTH_label
                text: 'Photo width: NOT SET'

            Label:
                text: 'Unnecessary'
            Label:
                id: SAVE_DATA_FOLDER_label
                text: 'Sequence export folder: NOT SET'
            Label:
                id: PHOTO_WEIGHT_label
                text: 'Photo imporatnce: NOT SET'
            Label:
                id: PHOTO_DURATION_label
                text: 'Photo lasts: NOT SET'
            Label:
                id: BASED_ON_PHOTOS_label
                text: 'Initial photos(Y/N): NOT SET'
            Label:
                id: SPEED_label
                text: 'Cell speed: NOT SET'
            Label:
                id: SENSOR_DISTANCE_label
                text: 'Sensor distance: NOT SET'
            Label:
                id: SENSOR_ANGLE_label
                text: 'Sensor angle: NOT SET'
            Label:
                id: ROTATE_ANGLE_label
                text: 'Rotate angle: NOT SET'
            Label:
                id: VSIM_CELL_WEIGHT_label
                text: 'Importance of other cells: NOT SET'
            Label:
                id: VSIM_LIFETIME_label
                text: 'Cell last: NOT SET'

            Button:
                text: 'Generate'
                size_hint_x: 0.2
                on_press: app.generate()
            Button:
                text: 'Reset'
                size_hint_x: 0.2
                on_press: app.reset()